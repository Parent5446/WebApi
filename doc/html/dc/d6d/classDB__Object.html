<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>WebApi: DB_Object Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="../../main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="../../annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="../../functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>DB_Object Class Reference</h1><!-- doxytag: class="DB_Object" -->
<p><a href="../../d8/d9e/classDB__Object-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#a9e72ad4e667d0de2f3d2df0cc37c6463">getName</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#ae09675ff1d492c3571766142196556df">getId</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#a45d1bd94aa7a815efa455c79742a3aff">getInfo</a> ($obj, $name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#a96ce58f2dd8e64902dbd72a072083a0c">putInfo</a> ($obj, $property, $value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#aee226b738dafa7018cd39cc66a0d8665">addChild</a> ($child)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#aab1bdf6fa7b550f96f21292aa53bb052">addChildren</a> ($children)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#a2c2b7b97b2c73bee8d6d616fb51e297e">getPassKey</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#a8bd5723454893098af658c007c93a7c5">checkPassword</a> ($new, $original=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#a07519cd100d61b0985073f410f6456dd">changePassword</a> ($new)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#ad323cdf42e524a6dccb1460c26d1a682">isAllowed</a> ($classname, $action, $property)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#acde3675787ca522413a21203a3957148">updateFromDatabase</a> ($column, $value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#afd22a626921cf089ccf1977a652d6fc1">updateToDatabase</a> ()</td></tr>
<tr><td colspan="2"><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#a8438909f696e1bb56d19eb617ef3f648">hashPassword</a> ($password, $iterations=1)</td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#a7e3792ecc489d4039ecef05574005aae">__construct</a> (&amp;$db, &amp;$config, $column, $value, $profile=array(), $new=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#a3f370bd811dc4f984150f220a5a7fd1c">changePasshash</a> ($new)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#a9924a8fa716e352e9528bf99f51a90fd">getTable</a> ()</td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#adec88cd7f52f2cbe98d4568c86d1e172">$info</a> = array()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#ae7ffc7d66d72066f8333048851ef6926">$protect</a> = true</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#a5ba1c6aa344fb0a4f91da7095105ee72">$clienthashing</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#a0d08820dae7ab434119115781b369714">$table</a></td></tr>
<tr><td colspan="2"><h2>Static Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#a4b05c22c55cb43234cc80dd35b1d542b">$enableprotect</a> = true</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d6d/classDB__Object.html#abc24dbdab0d6a65f2f775ae46d0c4a59">$parent</a> = true</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00038">38</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7e3792ecc489d4039ecef05574005aae"></a><!-- doxytag: member="DB_Object::__construct" ref="a7e3792ecc489d4039ecef05574005aae" args="(&amp;$db, &amp;$config, $column, $value, $profile=array(), $new=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::__construct </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>column</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>profile</em> = <code>array()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>new</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Store the database and given information within the object. If an empty password is given then password protection is disabled. If the $curpass variable is empty then client hashing will be disabled.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>object</em>&nbsp;</td><td>&amp;$db A <a class="el" href="../../d3/d63/classDB__Database.html">DB_Database</a> object used for database queries </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>int</em>&nbsp;</td><td>$id The ID of the object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$name The name of the object (e.g. username for users) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$origpass A SHA512 hash of the original password protecting the object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$curpass The current one-time key produced by hash chaining </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>int</em>&nbsp;</td><td>$curpassnum The number of hash iterations for the $curpass </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>array</em>&nbsp;</td><td>$profile Any information specific to the object from the database </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00096">96</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

<p>References <a class="el" href="../../de/d20/index_8php_source.html#l00013">$config</a>, <a class="el" href="../../d7/da1/Object_8php_source.html#l00061">$info</a>, <a class="el" href="../../d7/da1/Object_8php_source.html#l00431">getTable()</a>, <a class="el" href="../../d7/da1/Object_8php_source.html#l00495">hashPassword()</a>, <a class="el" href="../../d3/d5e/Logger_8php_source.html#l00061">MAIN_Logger::NOTICE</a>, <a class="el" href="../../d7/da1/Object_8php_source.html#l00396">updateFromDatabase()</a>, <a class="el" href="../../d7/da1/Object_8php_source.html#l00411">updateToDatabase()</a>, and <a class="el" href="../../da/d79/Error_8php_source.html#l00049">MAIN_Error::WARNING</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aee226b738dafa7018cd39cc66a0d8665"></a><!-- doxytag: member="DB_Object::addChild" ref="aee226b738dafa7018cd39cc66a0d8665" args="($child)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::addChild </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>child</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Merges a child database object with the current object.</p>
<p>Adds an array with the child object's ID, name, profile, and the object itself into the current object's profile. It is stored in: $&lt;currentObject&gt;-&gt;profile[&lt;nameOfChildObject&gt;][]</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>object</em>&nbsp;</td><td>$child Child object to store</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>bool True on success, false otherwise </dd></dl>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00218">218</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

<p>Referenced by <a class="el" href="../../d7/da1/Object_8php_source.html#l00243">addChildren()</a>.</p>

</div>
</div>
<a class="anchor" id="aab1bdf6fa7b550f96f21292aa53bb052"></a><!-- doxytag: member="DB_Object::addChildren" ref="aab1bdf6fa7b550f96f21292aa53bb052" args="($children)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::addChildren </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>children</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Merges multiple child database objects with the current object. Calls the addChild function for each child given.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>array</em>&nbsp;</td><td>$child Child objects to add</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>bool True on success, false otherwise </dd></dl>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00243">243</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

<p>References <a class="el" href="../../d7/da1/Object_8php_source.html#l00218">addChild()</a>.</p>

</div>
</div>
<a class="anchor" id="a3f370bd811dc4f984150f220a5a7fd1c"></a><!-- doxytag: member="DB_Object::changePasshash" ref="a3f370bd811dc4f984150f220a5a7fd1c" args="($new)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::changePasshash </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>new</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Used for one time keys when hash chaining and client-side hashing is enabled. Decreases the hash chain count by one and uses the given hash as the new current hash.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$new The next hash in the hash chain (as supplied by the user)</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>bool True on success, false on failure </dd></dl>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00329">329</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

<p>References <a class="el" href="../../d7/da1/Object_8php_source.html#l00061">$info</a>.</p>

<p>Referenced by <a class="el" href="../../d7/da1/Object_8php_source.html#l00273">checkPassword()</a>.</p>

</div>
</div>
<a class="anchor" id="a07519cd100d61b0985073f410f6456dd"></a><!-- doxytag: member="DB_Object::changePassword" ref="a07519cd100d61b0985073f410f6456dd" args="($new)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::changePassword </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>new</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Change the password for the object.</p>
<p>Store a new password hash in the database as well as the password hashed 1000 times for client side hashing.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$new The new plaintext password</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>bool True on success, false on failure. </dd></dl>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00304">304</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

<p>References <a class="el" href="../../d7/da1/Object_8php_source.html#l00495">hashPassword()</a>, and <a class="el" href="../../d7/da1/Object_8php_source.html#l00411">updateToDatabase()</a>.</p>

</div>
</div>
<a class="anchor" id="a8bd5723454893098af658c007c93a7c5"></a><!-- doxytag: member="DB_Object::checkPassword" ref="a8bd5723454893098af658c007c93a7c5" args="($new, $original=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::checkPassword </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>original</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Compare a given password to the stored password hash.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$new The password to check </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bool</em>&nbsp;</td><td>$original Whether the given password is the actual plaintext password or a one time key on the hash chain</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>bool True if the password is correct, false otherwise </dd></dl>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00273">273</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

<p>References <a class="el" href="../../d7/da1/Object_8php_source.html#l00329">changePasshash()</a>, and <a class="el" href="../../d7/da1/Object_8php_source.html#l00495">hashPassword()</a>.</p>

</div>
</div>
<a class="anchor" id="ae09675ff1d492c3571766142196556df"></a><!-- doxytag: member="DB_Object::getId" ref="ae09675ff1d492c3571766142196556df" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::getId </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the ID of the object.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>int The ID of the object </dd></dl>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00145">145</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

</div>
</div>
<a class="anchor" id="a45d1bd94aa7a815efa455c79742a3aff"></a><!-- doxytag: member="DB_Object::getInfo" ref="a45d1bd94aa7a815efa455c79742a3aff" args="($obj, $name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::getInfo </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get any property of an object, checking if the object is allowed to access the property first.</p>
<p>The permission to get the value of any property is in the form of "$classname-get-$name", where $classname is the name of this object, and $name is the property being accessed. However, if the object has: * "*-get-$name" (get $name from any object), * "$classname-*-$name" (do anything to $name for this class), * "$classname-get-*" (get anything from the object) or any combination of those, the request will also be allowed.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>object</em>&nbsp;</td><td>$obj A copy of the calling object (just give $this) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$name Name of the property to access</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>mixed The requested property if allowed, <a class="el" href="../../d4/d5e/classMAIN__Error.html">MAIN_Error</a> if not allowed </dd></dl>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00166">166</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

<p>References <a class="el" href="../../da/d79/Error_8php_source.html#l00049">MAIN_Error::WARNING</a>.</p>

</div>
</div>
<a class="anchor" id="a9e72ad4e667d0de2f3d2df0cc37c6463"></a><!-- doxytag: member="DB_Object::getName" ref="a9e72ad4e667d0de2f3d2df0cc37c6463" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::getName </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the name of the object.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>string The name of the object </dd></dl>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00136">136</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

</div>
</div>
<a class="anchor" id="a2c2b7b97b2c73bee8d6d616fb51e297e"></a><!-- doxytag: member="DB_Object::getPassKey" ref="a2c2b7b97b2c73bee8d6d616fb51e297e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::getPassKey </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the current iteration on the hash chain.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>array The current iteration on the hash chain </dd></dl>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00257">257</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

</div>
</div>
<a class="anchor" id="a9924a8fa716e352e9528bf99f51a90fd"></a><!-- doxytag: member="DB_Object::getTable" ref="a9924a8fa716e352e9528bf99f51a90fd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::getTable </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Gets the table associated with this object, and sets it up if it does not exist.</p>
<p>First checks if the table already exists, and returns it if it does. If not, constructs SQL to create a new table using definitions in the configuration file, then submits the query, reloads the database, and tries to get the table again.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>object <a class="el" href="../../d6/d90/classDB__Table.html">DB_Table</a> on success, <a class="el" href="../../d4/d5e/classMAIN__Error.html">MAIN_Error</a> on error </dd></dl>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00431">431</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

<p>References <a class="el" href="../../d7/da1/Object_8php_source.html#l00081">$table</a>, and <a class="el" href="../../da/d79/Error_8php_source.html#l00043">MAIN_Error::ERROR</a>.</p>

<p>Referenced by <a class="el" href="../../d7/da1/Object_8php_source.html#l00096">__construct()</a>, <a class="el" href="../../d7/da1/Object_8php_source.html#l00396">updateFromDatabase()</a>, and <a class="el" href="../../d7/da1/Object_8php_source.html#l00411">updateToDatabase()</a>.</p>

</div>
</div>
<a class="anchor" id="a8438909f696e1bb56d19eb617ef3f648"></a><!-- doxytag: member="DB_Object::hashPassword" ref="a8438909f696e1bb56d19eb617ef3f648" args="($password, $iterations=1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static DB_Object::hashPassword </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>password</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>iterations</em> = <code>1</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Hash a given plaintext password a given number of times (1 hash is the default).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$password The password to hash </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>int</em>&nbsp;</td><td>$iterations Number of times to hash the password</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>string Hash of the password </dd></dl>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00495">495</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

<p>Referenced by <a class="el" href="../../d7/da1/Object_8php_source.html#l00096">__construct()</a>, <a class="el" href="../../d7/da1/Object_8php_source.html#l00304">changePassword()</a>, and <a class="el" href="../../d7/da1/Object_8php_source.html#l00273">checkPassword()</a>.</p>

</div>
</div>
<a class="anchor" id="ad323cdf42e524a6dccb1460c26d1a682"></a><!-- doxytag: member="DB_Object::isAllowed" ref="ad323cdf42e524a6dccb1460c26d1a682" args="($classname, $action, $property)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::isAllowed </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>classname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>property</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Check if the object is allowed to do a certain action.</p>
<p>Checks the groups of the object, and uses <a class="el" href="../../dc/d96/classMAIN__Config.html">MAIN_Config</a> to compile an array of permissions from those groups. Then checks if the $action is in the array.</p>
<p>The format of a permission is "$classname-$action-$property", where $classname is the object being accessed, $action is either 'get' or 'set', and $property is the name of the property. By having that permission, the action is allowed. In addition, the asterisk wildcard can be used in any field to give permission for any class, any action, any property, or a combination of the three.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$action Requested action</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>bool True if allowed, false otherwise </dd></dl>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00359">359</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

</div>
</div>
<a class="anchor" id="a96ce58f2dd8e64902dbd72a072083a0c"></a><!-- doxytag: member="DB_Object::putInfo" ref="a96ce58f2dd8e64902dbd72a072083a0c" args="($obj, $property, $value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::putInfo </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>property</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set any property of an object, checking if the object is allowed to access the property first.</p>
<p>The permission to set the value of any property is in the form of "$classname-set-$name", where $classname is the name of this object, and $name is the property being accessed. However, if the object has: * "*-set-$name" (get $name from any object), * "$classname-*-$name" (do anything to $name for this class), * "$classname-set-*" (get anything from the object) or any combination of those, the request will also be allowed.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>object</em>&nbsp;</td><td>$obj A copy of the calling object (just give $this) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$name Name of the property to give a new value </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$value Value to give the property</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>mixed The requested property if allowed, <a class="el" href="../../d4/d5e/classMAIN__Error.html">MAIN_Error</a> if not allowed </dd></dl>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00195">195</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

<p>References <a class="el" href="../../da/d79/Error_8php_source.html#l00049">MAIN_Error::WARNING</a>.</p>

</div>
</div>
<a class="anchor" id="acde3675787ca522413a21203a3957148"></a><!-- doxytag: member="DB_Object::updateFromDatabase" ref="acde3675787ca522413a21203a3957148" args="($column, $value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::updateFromDatabase </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>column</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get properties about the object from the database.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$column Column to search for info from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$value Value in the column to match the object to. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00396">396</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

<p>References <a class="el" href="../../d7/da1/Object_8php_source.html#l00081">$table</a>, and <a class="el" href="../../d7/da1/Object_8php_source.html#l00431">getTable()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/da1/Object_8php_source.html#l00096">__construct()</a>.</p>

</div>
</div>
<a class="anchor" id="afd22a626921cf089ccf1977a652d6fc1"></a><!-- doxytag: member="DB_Object::updateToDatabase" ref="afd22a626921cf089ccf1977a652d6fc1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::updateToDatabase </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Update properties about the object to the database.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>bool True on success, false on failure. </dd></dl>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00411">411</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

<p>References <a class="el" href="../../d7/da1/Object_8php_source.html#l00081">$table</a>, and <a class="el" href="../../d7/da1/Object_8php_source.html#l00431">getTable()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/da1/Object_8php_source.html#l00096">__construct()</a>, and <a class="el" href="../../d7/da1/Object_8php_source.html#l00304">changePassword()</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a5ba1c6aa344fb0a4f91da7095105ee72"></a><!-- doxytag: member="DB_Object::$clienthashing" ref="a5ba1c6aa344fb0a4f91da7095105ee72" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::$clienthashing = false<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Whether to enable client hashing, when a password is entered by a user, hash chaining is used on the client side to prevent man-in-the-middle attacks. Requires the proper client-side scripts to be in place. </p>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00075">75</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

</div>
</div>
<a class="anchor" id="a4b05c22c55cb43234cc80dd35b1d542b"></a><!-- doxytag: member="DB_Object::$enableprotect" ref="a4b05c22c55cb43234cc80dd35b1d542b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::$enableprotect = true<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Determines whether to enable password protection on a global scope. Should be customized in the child class definition. </p>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00046">46</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

</div>
</div>
<a class="anchor" id="adec88cd7f52f2cbe98d4568c86d1e172"></a><!-- doxytag: member="DB_Object::$info" ref="adec88cd7f52f2cbe98d4568c86d1e172" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::$info = array()<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stores information about the object that has been retrieved from the database. </p>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00061">61</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

<p>Referenced by <a class="el" href="../../d7/da1/Object_8php_source.html#l00096">__construct()</a>, and <a class="el" href="../../d7/da1/Object_8php_source.html#l00329">changePasshash()</a>.</p>

</div>
</div>
<a class="anchor" id="abc24dbdab0d6a65f2f775ae46d0c4a59"></a><!-- doxytag: member="DB_Object::$parent" ref="abc24dbdab0d6a65f2f775ae46d0c4a59" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::$parent = true<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Determines whether the object can take in other objects as its children. When taking in a child object, the profiles of the two are merged. </p>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00054">54</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

</div>
</div>
<a class="anchor" id="ae7ffc7d66d72066f8333048851ef6926"></a><!-- doxytag: member="DB_Object::$protect" ref="ae7ffc7d66d72066f8333048851ef6926" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::$protect = true<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Determines whether to enable password protection on a per-object basis. </p>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00067">67</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

</div>
</div>
<a class="anchor" id="a0d08820dae7ab434119115781b369714"></a><!-- doxytag: member="DB_Object::$table" ref="a0d08820dae7ab434119115781b369714" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DB_Object::$table<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A <a class="el" href="../../d6/d90/classDB__Table.html">DB_Table</a> object to be used for all database queries. </p>

<p>Definition at line <a class="el" href="../../d7/da1/Object_8php_source.html#l00081">81</a> of file <a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a>.</p>

<p>Referenced by <a class="el" href="../../d7/da1/Object_8php_source.html#l00431">getTable()</a>, <a class="el" href="../../d7/da1/Object_8php_source.html#l00396">updateFromDatabase()</a>, and <a class="el" href="../../d7/da1/Object_8php_source.html#l00411">updateToDatabase()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>app/db/<a class="el" href="../../d7/da1/Object_8php_source.html">Object.php</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Thu Jan 28 21:25:46 2010 for WebApi by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
